<!doctype html>
<html lang="es" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Turnex — Turnos Peluquería</title>
  <meta name="description" content="Reserva de turnos para peluquería unisex (mujeres, hombres y niños) — simple, moderna y mobile-first." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/responsive.css">
  <!-- Optional: set API base via meta for production deployments -->
  <!-- Backend en Render -->
  <meta name="api-base" content="https://turnex-api.onrender.com/api">
  <script>
    (function(){
      var m = document.querySelector('meta[name="api-base"]');
      if(m && m.content && m.content.trim()){
        window.API_BASE = m.content.trim();
      }
    })();
  </script>
</head>
<body>
  <header class="navbar navbar-expand-lg sticky-top bg-body">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="#" aria-label="Inicio">
  <img src="assets/images/logo.svg" alt="Turnex logo" width="32" height="32" />
  <span class="fw-bold">Turnex</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <nav class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-3">
          <li class="nav-item"><a class="nav-link" href="#servicios">Servicios</a></li>
          <li class="nav-item"><a class="nav-link" href="#calendario">Calendario</a></li>
          <li class="nav-item"><a class="nav-link" href="#mis-turnos" id="navMyBookings">Mis turnos</a></li>
          <li class="nav-item d-none" id="navAdminItem"><a class="nav-link" href="#admin" id="navAdmin">Admin</a></li>
          <li class="nav-item d-flex gap-2">
            <button class="btn btn-outline-secondary" id="btnSignup">Crear cuenta</button>
            <button class="btn btn-primary" id="btnLogin">Ingresar</button>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero text-center py-5">
      <div class="container">
        <h1 class="display-5 fw-bold mb-2 d-flex justify-content-center align-items-center gap-2">
          <img src="assets/images/logo.svg" alt="Turnex" width="40" height="40" class="d-none d-sm-inline"/>
          <span>Turnos de peluquería en minutos</span>
        </h1>
        <p class="lead mb-1">Reservá online, fácil y rápido</p>
        <p class="text-body-secondary mb-2">Martes a Sábado · 09:00–18:00</p>
        <p class="text-body-secondary">Servicios para mujeres, hombres y niños</p>
        <div class="d-flex gap-2 justify-content-center mt-2">
          <a class="btn btn-lg btn-primary d-none" id="heroReserveCta" href="#calendario">Reservar ahora</a>
          <a class="btn btn-lg btn-outline-primary" href="#" data-open-auth="signup">Crear cuenta</a>
          <a class="btn btn-lg btn-outline-secondary" href="#servicios">Ver servicios</a>
        </div>
        <div class="container mt-4">
          <div class="row g-3 justify-content-center text-start text-sm-center">
            <div class="col-12 col-sm-4">
              <div class="card h-100 border-0 bg-body-tertiary">
                <div class="card-body">
                  <div class="text-primary display-6 mb-2"><i class="bi bi-person-plus"></i></div>
                  <div class="fw-semibold mb-1">1) Creá tu cuenta</div>
                  <div class="text-body-secondary small">Registrate con tu email para gestionar tus turnos.</div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-4">
              <div class="card h-100 border-0 bg-body-tertiary">
                <div class="card-body">
                  <div class="text-primary display-6 mb-2"><i class="bi bi-scissors"></i></div>
                  <div class="fw-semibold mb-1">2) Elegí el servicio</div>
                  <div class="text-body-secondary small">Mirá precios y duración; seleccioná el que te convenga.</div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-4">
              <div class="card h-100 border-0 bg-body-tertiary">
                <div class="card-body">
                  <div class="text-primary display-6 mb-2"><i class="bi bi-calendar-check"></i></div>
                  <div class="fw-semibold mb-1">3) Reservá fecha y hora</div>
                  <div class="text-body-secondary small">Confirmá en el calendario y recibí tu turno al instante.</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container mt-3">
          <div class="d-flex flex-wrap gap-3 justify-content-center align-items-center small text-body-secondary">
            <span class="d-inline-flex align-items-center gap-2"><i class="bi bi-shield-check text-success"></i> Cuenta segura</span>
            <span class="d-inline-flex align-items-center gap-2"><i class="bi bi-x-circle text-warning"></i> Cancelación simple</span>
            <span class="d-inline-flex align-items-center gap-2"><i class="bi bi-cash-coin text-primary"></i> Sin costo de reserva</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonios -->
    <section class="py-4 border-top border-bottom bg-body">
      <div class="container">
        <div class="row g-3 align-items-stretch">
          <div class="col-12 col-md-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body">
                <div class="d-flex align-items-center gap-2 mb-1 text-warning">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-half"></i>
                </div>
                <p class="m-0">“Reservé en 2 minutos y me atendieron perfecto. Súper práctico.”</p>
                <div class="small text-body-secondary mt-2">— Sofía</div>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body">
                <div class="d-flex align-items-center gap-2 mb-1 text-warning">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star"></i>
                </div>
                <p class="m-0">“Buenísimos los horarios disponibles y el recordatorio.”</p>
                <div class="small text-body-secondary mt-2">— Martín</div>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body">
                <div class="d-flex align-items-center gap-2 mb-1 text-warning">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
                <p class="m-0">“La app es clara y rápida. Recomendado.”</p>
                <div class="small text-body-secondary mt-2">— Camila</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Servicios -->
    <section id="servicios" class="py-5">
      <div class="container">
  <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-2">
    <div class="d-flex align-items-center gap-2">
      <h2 class="h3 fw-semibold m-0">Servicios destacados</h2>
      <span class="badge text-bg-primary d-none" id="servicesNewBadge"></span>
    </div>
    <div class="d-flex align-items-center gap-2">
      <label for="svcCategory" class="small text-body-secondary m-0">Filtrar por:</label>
      <select id="svcCategory" class="form-select form-select-sm" style="width:auto; min-width:180px">
        <option value="">Todas las categorías</option>
        <option value="corte">Corte</option>
        <option value="color">Color</option>
        <option value="tratamiento">Tratamiento</option>
        <option value="barba">Barba</option>
        <option value="peinado">Peinado</option>
      </select>
      <span class="small text-body-secondary" id="svcCount"></span>
    </div>
  </div>
  <p class="text-body-secondary mb-3">Explorá cortes, color, tratamientos y más — encontrá el ideal para vos.</p>
        <div class="card border-0 bg-body-tertiary mb-3" id="servicesSignupCard">
          <div class="card-body d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
            <div class="d-flex align-items-start gap-3">
              <div class="text-primary fs-3"><i class="bi bi-stars"></i></div>
              <div>
                <div class="fw-semibold">Reservá en 1 minuto</div>
                <div class="small text-body-secondary">Creá tu cuenta gratis y accedé a disponibilidad en vivo.</div>
                <ul class="small text-body-secondary m-0 mt-2 ps-3">
                  <li><i class="bi bi-check2-circle text-success me-1"></i>Sin costo de reserva</li>
                  <li><i class="bi bi-check2-circle text-success me-1"></i>Cancelación simple</li>
                  <li><i class="bi bi-check2-circle text-success me-1"></i>Tus turnos siempre a mano</li>
                </ul>
              </div>
            </div>
            <div class="d-grid d-md-inline">
              <button class="btn btn-primary" data-open-auth="signup">Crear cuenta gratis</button>
            </div>
          </div>
        </div>
        <div class="row g-3" id="servicesList" aria-live="polite"></div>
      </div>
    </section>

    <!-- Calendario y Turnos -->
  <section id="calendario" class="py-5 bg-body-tertiary d-none">
      <div class="container">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-end gap-3 mb-3">
          <div>
            <h2 class="h3 fw-semibold mb-1">Calendario de turnos</h2>
            <p class="text-body-secondary mb-0">Selecciona un día y luego un horario disponible</p>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-outline-secondary" id="prevMonth" aria-label="Mes anterior">«</button>
            <div class="month-label" id="monthLabel" aria-live="polite"></div>
            <button class="btn btn-outline-secondary" id="nextMonth" aria-label="Mes siguiente">»</button>
          </div>
        </div>

        <div class="calendar" role="grid" aria-label="Calendario">
          <div id="hoursBanner" class="d-flex align-items-center gap-2 small text-body-secondary mb-2">
            <i class="bi bi-clock"></i>
            <span>Horarios laborales: Mar–Sáb · 09:00–18:00</span>
          </div>
          <div class="calendar-grid" id="calendarGrid"></div>
        </div>

        <div class="mt-4">
          <h3 class="h5 fw-semibold">Horarios disponibles</h3>
          <div id="timeSlots" class="time-slots" aria-live="polite"></div>
        </div>

        <form id="bookingForm" class="mt-4 needs-validation" novalidate>
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <label for="service" class="form-label">Servicio</label>
              <select id="service" class="form-select" required aria-describedby="serviceHelp"></select>
              <div class="invalid-feedback">Seleccioná un servicio</div>
              <div id="serviceHelp" class="form-text">Elegí el servicio para calcular la duración.</div>
            </div>
            <div class="col-12 col-md-6">
              <label for="name" class="form-label">Nombre</label>
              <input id="name" class="form-control" required minlength="2" />
              <div class="invalid-feedback">Ingresá tu nombre</div>
            </div>
            <div class="col-12">
              <button type="submit" class="btn btn-primary btn-lg w-100" id="btnConfirm" disabled>Confirmar turno</button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <!-- Mis turnos -->
  <section id="mis-turnos" class="py-5 d-none">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="h3 fw-semibold">Mis turnos</h2>
          <button class="btn btn-outline-danger d-none" id="btnLogout">Cerrar sesión</button>
        </div>
        <div id="myBookings" class="row g-3" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <!-- Admin -->
  <section id="admin" class="py-5 bg-body-tertiary d-none">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="h3 fw-semibold">Panel de administración</h2>
        <span class="badge text-bg-secondary" id="adminBadge">Solo admin</span>
      </div>
      <div class="row g-3">
        <div class="col-12 col-lg-4">
          <div class="card h-100">
            <div class="card-body">
              <h3 class="h6">Resumen</h3>
              <ul class="list-unstyled m-0 small" id="adminSummary"></ul>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-4">
          <div class="card h-100">
            <div class="card-body">
              <h3 class="h6">Turnos por día (próx. 7)</h3>
              <ul class="list-unstyled m-0 small" id="adminByDay"></ul>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-4">
          <div class="card h-100">
            <div class="card-body">
              <h3 class="h6">Horarios por día</h3>
              <div class="small text-body-secondary mb-2">Editar rango (24h) para cada día laboral</div>
              <div class="vstack gap-2" id="adminHours"></div>
              <div class="d-grid gap-2 mt-3">
                <button class="btn btn-sm btn-success" id="btnSaveHours">Guardar cambios</button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column flex-lg-row justify-content-between gap-2 align-items-lg-center mb-2">
                <h3 class="h6 m-0">Próximos turnos</h3>
                <div class="d-flex flex-wrap gap-2">
                  <select class="form-select form-select-sm" id="adminFilterService" style="width:auto; min-width:220px">
                    <option value="">Todos los servicios</option>
                  </select>
                  <input type="date" class="form-control form-control-sm" id="adminFilterFrom" />
                  <input type="date" class="form-control form-control-sm" id="adminFilterTo" />
                  <button class="btn btn-sm btn-outline-secondary" id="adminFilterClear">Limpiar</button>
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-sm align-middle">
                  <thead>
                    <tr><th>Fecha</th><th>Hora</th><th>Servicio</th><th>Cliente</th><th></th></tr>
                  </thead>
                  <tbody id="adminBookings"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row g-3 mt-3">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h3 class="h6">Servicios (admin)</h3>
              <div class="small text-body-secondary mb-2">Agregá, editá o eliminá servicios disponibles. La duración afecta la disponibilidad.</div>
              <div class="row g-2 align-items-end mb-2">
                <div class="col-12 col-md-4">
                  <label class="form-label small" for="svcName">Nombre</label>
                  <input type="text" id="svcName" class="form-control form-control-sm" placeholder="Ej: Corte" />
                </div>
                <div class="col-12 col-md-5">
                  <label class="form-label small" for="svcDesc">Descripción (opcional)</label>
                  <input type="text" id="svcDesc" class="form-control form-control-sm" placeholder="Breve descripción" />
                </div>
                <div class="col-6 col-md-2">
                  <label class="form-label small" for="svcDuration">Duración (min)</label>
                  <input type="number" id="svcDuration" class="form-control form-control-sm" min="30" step="30" value="30" />
                </div>
                <div class="col-6 col-md-2">
                  <label class="form-label small" for="svcPrice">Precio ($)</label>
                  <input type="number" id="svcPrice" class="form-control form-control-sm" min="0" step="100" value="0" />
                </div>
                <div class="col-12 col-md-2 d-grid">
                  <button class="btn btn-sm btn-success" id="btnAddService">Agregar</button>
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-sm align-middle">
                  <thead><tr><th>Nombre</th><th>Descripción</th><th>Duración</th><th>Precio</th><th></th></tr></thead>
                  <tbody id="adminServices"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h3 class="h6">Días bloqueados</h3>
              <div class="small text-body-secondary mb-2">Los días bloqueados no aparecerán disponibles en el calendario.</div>
              <div class="d-flex gap-2 align-items-center flex-wrap mb-2">
                <input type="date" class="form-control form-control-sm" id="adminBlockDate" />
                <button class="btn btn-sm btn-warning" id="btnAddBlocked">Bloquear día</button>
              </div>
              <ul class="list-unstyled m-0 small d-flex gap-2 flex-wrap" id="blockedDaysList"></ul>
              <hr>
              <h3 class="h6">Bloqueo por rango de fechas</h3>
              <div class="d-flex gap-2 align-items-center flex-wrap mb-2">
                <input type="date" class="form-control form-control-sm" id="adminRangeFrom" />
                <span>a</span>
                <input type="date" class="form-control form-control-sm" id="adminRangeTo" />
                <button class="btn btn-sm btn-warning" id="btnAddRange">Bloquear rango</button>
              </div>
              <ul class="list-unstyled m-0 small d-flex gap-2 flex-wrap" id="blockedRangesList"></ul>
              <hr>
              <h3 class="h6">Bloqueo de horarios por día</h3>
              <div class="d-flex gap-2 align-items-center flex-wrap mb-2">
                <input type="date" class="form-control form-control-sm" id="adminTimeDate" />
                <input type="time" class="form-control form-control-sm" id="adminTimeFrom" step="1800" />
                <span>a</span>
                <input type="time" class="form-control form-control-sm" id="adminTimeTo" step="1800" />
                <button class="btn btn-sm btn-warning" id="btnAddTimeBlock">Bloquear horario</button>
              </div>
              <ul class="list-unstyled m-0 small d-flex gap-2 flex-wrap" id="blockedTimesList"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Auth Modal -->
  <div class="modal fade" id="authModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Ingresar</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <form id="authForm" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input id="email" type="email" class="form-control" required />
              <div class="invalid-feedback">Ingresá un email válido</div>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Contraseña</label>
              <input id="password" type="password" class="form-control" minlength="6" required />
              <div class="invalid-feedback">Mínimo 6 caracteres</div>
            </div>
            <div class="d-grid gap-2">
              <button class="btn btn-primary" type="submit" id="btnDoLogin">Ingresar</button>
              <button class="btn btn-outline-secondary" type="button" id="btnToggleAuth">Crear cuenta</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <footer class="py-4 text-center small text-body-secondary">
    <div class="container">© <span id="year"></span> Turnex — Hecho con ♥ por el Grupo 11</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script type="module" src="./js/app.js"></script>
</body>
</html>
